function payment_poup(e){$("#os_popup").html(e),$("#os_popup").show()}function saveDetailsBefore(){$("#svprgs").show(),document.getElementById("save_card").disabled=!0}function saveDetailsCmplt(){setTimeout(function(){$("#svprgs").hide(),$("#os_popup").hide("slow",function(){$("#os_popup").html("")})},2e3),document.getElementById("save_card").disabled=!1}function card_details_save(e){return url_redirection($.trim(e)),1==isJson(e)?(errorDisplay(e),!1):void("ONINSSUCCESS"==$.trim(e)?($("#svprgs").html("Card Successfully added"),document.getElementById("addcarddetails").reset()):alert("Insertion failed"))}function addNewcardForm(e){$(".oneshop_paybookpopup").html(e)}$(document).on("click","#save_card",function(){$("#scope_type_error,#card_no_error,#usagetype_error,#card_type_error,#card_name_error,#name_on_card_error,#cvv_error,#expiry_year_error").html("");var e=$.trim($("#scope_type").val()),r=$.trim($("#card_no").val()),t=$.trim($("#usagetype").val()),a=$.trim($("#card_type").val()),o=$.trim($("#card_name").val()),n=$.trim($("#name_on_card").val()),l=$.trim($("#cvv").val()),i=$.trim($("#expiry_year").val()),c=$.trim($("#expiry_month").val()),_=!0,d=new Date,p=d.getMonth(),m=d.getFullYear();if(""==e&&($("#scope_type_error").html("You can't leave this empty."),_=!1),""==r||0==onlyNumeric(r)?(_=!1,$("#card_no_error").html("You can't leave this empty and fill with numerics only")):r.length<12&&(_=!1,$("#card_no_error").html("Card Number Invalid")),""==t&&(_=!1,$("#usagetype_error").html("You can't leave this empty.")),""==a&&(_=!1,$("#card_type_error").html("You can't leave this empty.")),(""==o||0==onlyAlphabetsWithSpace(o))&&(_=!1,$("#card_name_error").html("You can't leave this empty and fill with alfabets only")),(""==n||0==onlyAlphabetsWithSpace(n))&&(_=!1,$("#name_on_card_error").html("You can't leave this empty and fill with alfabets only")),""==l||0==onlyNumeric(l)?(_=!1,$("#cvv_error").html("You can't leave this empty  and fill with numerics only")):l.length<=4&&(_=!1,$("#cvv_error").html("Invalid CVV")),""==i||0==onlyNumeric(i)||0==onlyNumeric(c)||""==c?(_=!1,$("#expiry_year_error").html("You can't leave this empty  and filled with numerics only")):i.length<4||m>i?(_=!1,$("#expiry_year_error").html("Invalid Year")):0==c.length||c>12?(_=!1,$("#expiry_year_error").html("Invalid Month")):i==m&&p>c&&(_=!1,$("#expiry_year_error").html("Invalid Month")),0==_)return!1;var s="scope_type="+e+"&card_no="+r+"&usagetype="+t+"&card_type="+a+"&card_name="+o+"&name_on_card="+n+"&cvv="+l+"&expiry_year="+i+"&expiry_month="+c+"&skey="+sekey_return();callAJAX(onenetwork_url+"payment/saveCardDetails/",s,card_details_save,saveDetailsBefore,saveDetailsCmplt)}),$(document).on("click","#newcard_btn",function(){callAJAX(onenetwork_url+"payment/addCardPopup/","",addNewcardForm,"","")}),$(document).on("click","#paybook_yes_btn",function(){$("#cards_div").slideDown("slow")}),$(document).on("click","#paybook_no_btn",function(){$("#os_popup").hide(),$("#os_popup").html("")});
